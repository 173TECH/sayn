
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://173tech.github.io/sayn/database_objects/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-6.2.8">
    
    
      
        <title>Database objects - SAYN</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#00bdd6">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/admonitions.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-149287493-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="cyan" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#database_objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://173tech.github.io/sayn/" title="SAYN" class="md-header-nav__button md-logo" aria-label="SAYN">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            SAYN
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Database objects
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/173TECH/sayn" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    173TECH/sayn
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://173tech.github.io/sayn/" title="SAYN" class="md-nav__button md-logo" aria-label="SAYN">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    SAYN
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/173TECH/sayn" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    173TECH/sayn
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/tutorial_part1/" class="md-nav__link">
        Tutorial (Part 1)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/tutorial_part2/" class="md-nav__link">
        Tutorial (Part 2)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/tutorial_part3/" class="md-nav__link">
        Tutorial (Part 3)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
      
      <label class="md-nav__link" for="nav-3">
        Core Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Core Concepts" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Core Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        CLI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../project_structure/" class="md-nav__link">
        Project Structure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../settings/project_yaml/" class="md-nav__link">
        project.yaml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../settings/settings_yaml/" class="md-nav__link">
        settings.yaml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/overview/" class="md-nav__link">
        Tasks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../presets/" class="md-nav__link">
        Presets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../parameters/" class="md-nav__link">
        Parameters
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Database objects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Database objects
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#object_specification" class="md-nav__link">
    Object specification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation_of_object_names" class="md-nav__link">
    Compilation of object names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#name_configuration" class="md-nav__link">
    Name configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencing_database_objects" class="md-nav__link">
    Referencing database objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#altering_the_behaviour_of_src" class="md-nav__link">
    Altering the behaviour of src
  </a>
  
    <nav class="md-nav" aria-label="Altering the behaviour of src">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from_prod_configuration" class="md-nav__link">
    from_prod configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upstream_prod" class="md-nav__link">
    Upstream prod
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced_usage" class="md-nav__link">
    Advanced usage
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        Tasks
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tasks" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Tasks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/autosql/" class="md-nav__link">
        AutoSQL[SUNSETTED]
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/python/" class="md-nav__link">
        Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/sql/" class="md-nav__link">
        SQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/copy/" class="md-nav__link">
        Copy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/dummy/" class="md-nav__link">
        Dummy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        Data Tests
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Tests" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Data Tests
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tests/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tests/standard/" class="md-nav__link">
        Standard
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tests/custom/" class="md-nav__link">
        Custom
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
      
      <label class="md-nav__link" for="nav-6">
        Databases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Databases" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          Databases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/bigquery/" class="md-nav__link">
        BigQuery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/mysql/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/postgresql/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/redshift/" class="md-nav__link">
        Redshift
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/snowflake/" class="md-nav__link">
        Snowflake
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../databases/sqlite/" class="md-nav__link">
        SQLite
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../api/database/" class="md-nav__link">
        Database
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../api/python_task/" class="md-nav__link">
        PythonTask
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
      
      <label class="md-nav__link" for="nav-8">
        Project Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Project Examples" data-md-level="1">
        <label class="md-nav__title" for="nav-8">
          <span class="md-nav__icon md-icon"></span>
          Project Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../project_examples/simple_etl/" class="md-nav__link">
        A Simple ETL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../project_examples/reddit_news_nlp/" class="md-nav__link">
        Reddit News NLP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../project_examples/facebook_data_project/" class="md-nav__link">
        Facebook Data Project
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#object_specification" class="md-nav__link">
    Object specification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation_of_object_names" class="md-nav__link">
    Compilation of object names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#name_configuration" class="md-nav__link">
    Name configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencing_database_objects" class="md-nav__link">
    Referencing database objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#altering_the_behaviour_of_src" class="md-nav__link">
    Altering the behaviour of src
  </a>
  
    <nav class="md-nav" aria-label="Altering the behaviour of src">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from_prod_configuration" class="md-nav__link">
    from_prod configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upstream_prod" class="md-nav__link">
    Upstream prod
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced_usage" class="md-nav__link">
    Advanced usage
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="database_objects">Database objects<a class="headerlink" href="#database_objects" title="Permanent link">&para;</a></h1>
<p>The most common task found in SAYN projects is the <code>autosql</code> task. This is a type of tasks where you write a <code>SELECT</code> statement
and SAYN handles the database object creation. When you run the project you would want a task selecting from a table to run
after the task that creates said table. In order to simplify task dependencies, SAYN considers database objects core concepts
and provides some tools to treat them as such.</p>
<h2 id="object_specification">Object specification<a class="headerlink" href="#object_specification" title="Permanent link">&para;</a></h2>
<p>In a relational database we typically find database tables organised into schemas, so for example <code>logs.tournaments</code> refers to
a table (or view) called <code>tournaments</code> in the <code>logs</code> schema, whereas <code>arenas</code> refers to a table (or view) called <code>arenas</code> in the
default schema. SAYN uses the same format to refer to database tables and views, but as we'll see this allows for a more dynamic use.</p>
<h2 id="compilation_of_object_names">Compilation of object names<a class="headerlink" href="#compilation_of_object_names" title="Permanent link">&para;</a></h2>
<p>In a real world scenario we want to write our code in a way that dynamically changes depending on the profile we're running
on (eg: test vs production). This allows for multiple people to collaborate on the same project, wihtout someone's actions
affecting the work of others in the team. Let's consider this example task:</p>
<div class="admonition example">
<p class="admonition-title">tasks/core.yaml</p>
<div class="highlight"><pre><span></span><code>tasks:
  example_task:
    type: autosql
    materialisation: table
    file_name: example_task.sql
    destination:
      schema: models
      table: example_model
</code></pre></div>
</div>
<p>This task uses the <code>SELECT</code> statement in the file <code>sql/example_task.sql</code> and creates a table <code>example_model</code> in the <code>models</code> schema
of the default database. Now, if someone in your team runs this task, <code>models.example_model</code> will be replace with their new code
and if someone else in the team is executing a task that reads from it it can produce undesired results.</p>
<p>A way to solve this problem could be to have different databases for each person in a team but that can easily lead to complicated
database setups, potential data governance issues and increased database costs, as you might need a copy of the data per person
working with it.</p>
<p>In SAYN there's another solution: we express database object names like <code>schema.table</code> but the code that's execution in the database
is transformed according to personal settings. For example, we could have a schema called <code>analytics_models</code> where our production lives
and another called <code>test_models</code> where we store data produced during development, with table names like <code>USER_PREFIX_table</code> rather
than <code>table</code> so there's no collision and we minimise data redundancy.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Name configuration only affects the <code>default_db</code>. When a SAYN project has more than 1 database
connection you can still use the macros described in this page to set dependencies, but the
resulting value of the macro is exactly the same as the input.</p>
</div>
<h2 id="name_configuration">Name configuration<a class="headerlink" href="#name_configuration" title="Permanent link">&para;</a></h2>
<p>The modifications described above are setup with prefixes, suffixes and overrides. For example:</p>
<div class="admonition example">
<p class="admonition-title">settings.yaml</p>
<div class="highlight"><pre><span></span><code>profiles:
  test:
    schema_prefix: test
    table_prefix: up
</code></pre></div>
</div>
<p>The above will make every <code>schema.table</code> specification to be compiled to <code>test_schema.up_table</code>.</p>
<p>Following the example in the previous section, if we want the to call the production schema <code>analytics_models</code> we can do so by
adding the prefix in the <code>project.yaml</code> file:</p>
<div class="admonition example">
<p class="admonition-title">project.yaml</p>
<div class="highlight"><pre><span></span><code>schema_prefix: analytics
</code></pre></div>
</div>
<p>Having both files above configured like that will make it so that referencing <code>models.example_model</code> on production will be translated
to <code>analytics_models.example_model</code> whereas the same code during testing will be translated as <code>test_models.up_example_model</code>. In other
words, what we define in <code>project.yaml</code> is the default behaviour which can be overriden in <code>settings.yaml</code>.</p>
<p>Aside from <code>schema_prefix</code> and <code>table_prefix</code> we also have <code>suffix</code> (<code>schema_suffix</code> and <code>table_suffix</code>) which as expected would instead
of prepending the value and an underscore, it adds that at the end.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Although the name of these settigns is <code>table_*</code> this also applies to views in the database. Similarly
in some databases the concept of <code>schema</code> is called differently (eg: dataset in BigQuery) but <code>schema</code>
is still used for all databases in SAYN.</p>
</div>
<h2 id="referencing_database_objects">Referencing database objects<a class="headerlink" href="#referencing_database_objects" title="Permanent link">&para;</a></h2>
<p>So far we've seen how the properties of an autosql task use this database object specification, but the real power of this feature is when
used in the code of the task itself, which we do this with the <code>src</code> and <code>out</code> macros. For example:</p>
<div class="admonition example">
<p class="admonition-title">settings.yaml</p>
<div class="highlight"><pre><span></span><code>profiles:
  test:
    schema_prefix: test
    table_prefix: up
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">sql/example_model.sql</p>
<div class="highlight"><pre><span></span><code>SELECT *
  FROM {{ src(&#39;logs.raw_table&#39;) }}
</code></pre></div>
</div>
<p>Here we're calling the <code>src</code> macro that does 2 things:</p>
<ul>
<li>Using prefixes and suffixes translates <code>logs.raw_table</code> to the appropriate table name</li>
<li>Declares that <code>example_task</code> (as defined earlier in this page) depends on the task(s) that produce <code>logs.raw_table</code></li>
</ul>
<p>So the output code to be executed in the database will be:</p>
<div class="admonition example">
<p class="admonition-title">compile/core/example_model.sql</p>
<div class="highlight"><pre><span></span><code>-- SAYN adds the table management code
SELECT *
  FROM test_logs.up_raw_table
</code></pre></div>
</div>
<p>The counterpart to <code>src</code> is <code>out</code> which similarly translates the value to the appropriate database name, as well as it defines database
objects produced by the task. In <code>autosql</code> tasks <code>out</code> is not present since there's no usage for it, however this is useful for <code>sql</code> tasks:</p>
<div class="admonition example">
<p class="admonition-title">sql/example_sql.sql</p>
<div class="highlight"><pre><span></span><code>CREATE OR REPLACE TABLE {{ out(&#39;models.sql_example&#39;) }} AS
SELECT *
  FROM {{ src(&#39;logs.raw_table&#39;) }}
</code></pre></div>
</div>
<p>This code tells SAYN that this sql task produces the table <code>models.sql_example</code> and depends on the table <code>logs.raw_table</code>, while
simultaneously producing this example code to be executed in the database:</p>
<div class="admonition example">
<p class="admonition-title">compile/core/example_sql.sql</p>
<div class="highlight"><pre><span></span><code>CREATE OR REPLACE TABLE test_models.up_sql_example AS
SELECT *
  FROM test_logs.up_raw_table
</code></pre></div>
</div>
<p><code>src</code> and <code>out</code> are also available to python tasks, however we use them with <code>context.src</code> or <code>self.src</code>:</p>
<div class="admonition example">
<p class="admonition-title">python/example.py</p>
<div class="highlight"><pre><span></span><code>@task(sources=&#39;logs.raw_table&#39;)
def example_python(context, warehouse):
    table_name = context.src(&#39;logs.raw_table&#39;)
    data = warehouse.read_data(f&quot;select * from {table_name}&quot;)
    ...
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">python/advanced_example.py</p>
<div class="highlight"><pre><span></span><code>class MyTask(PythonTask):
    def config(self):
        self.table_name = self.src(&#39;logs.raw_table&#39;)

    def run(self):
        data = self.default_db.read_data(f&quot;select * from {self.table_name}&quot;)
    ...
</code></pre></div>
</div>
<p>The above examples are equivalent to each other and we use <code>context.src</code> in the decorator form and <code>self.src</code> in the more advanced class
model. <code>context.out</code> and <code>self.out</code> are also available in python tasks and their behaviour is the same as with sql and autosql tasks.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><code>src</code> should only be used for tables that are managed by the SAYN project. If an external EL tool is being used to load data
into your warehouse, references to these tables should be hardcoded instead, as their names never change depending on your SAYN
profile, nor there are any task dependencies to infer from using <code>src</code>.</p>
</div>
<p>Note that calling <code>src</code> and <code>out</code> in the <code>run</code> method of a python task class or in the function code when using a decorator doesn't
affect task dependencies, it simply outputs the translated database object name. The task dependency behaviour in python tasks is done
by either calling <code>self.src</code> or <code>self.out</code> in the <code>config</code> method of the class or by passing these references to the <code>task</code> decorator
in the <code>sources</code> and <code>outputs</code> arguments as seen in this example. For more details head to <a href="tasks/python">the python task section</a>.</p>
<h2 id="altering_the_behaviour_of_src">Altering the behaviour of <code>src</code><a class="headerlink" href="#altering_the_behaviour_of_src" title="Permanent link">&para;</a></h2>
<p>A very common situation when working in your data pipeline is when we have a lot of data to work with but at any point in time while modelling
we find ourselves working only a subset of it. Working with sample data can be inconvenient during development because it hinders our
ability to evaluate the result and the alternative, having a duplicate of the data for every person in the team, can be costly both in
terms of money and time producing and maintaining these duplicates. For this reason SAYN comes equiped with 2 features that simplifies this
switchin: <code>from_prod</code> and upstream prod.</p>
<p><code>from_prod</code> is most useful when a team member never deals with a part of the SAYN project. For example, a data analyst that only deals with 
modelling tasks in a SAYN project that also has extraction tasks. Upstream prod is most useful when we're doing changes to a small set of task,
so we don't want to have to repopulate all the upstream tables.</p>
<h3 id="from_prod_configuration"><code>from_prod</code> configuration<a class="headerlink" href="#from_prod_configuration" title="Permanent link">&para;</a></h3>
<p>The first mechanism is <code>from_prod</code> which we set in the <code>settings.yaml</code> file and override the behaviour of <code>src</code>. An example:</p>
<div class="admonition example">
<p class="admonition-title">project.yaml</p>
<div class="highlight"><pre><span></span><code>schema_prefix: analytics
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">sql/core/test_table.sql</p>
<div class="highlight"><pre><span></span><code>SELECT *
  FROM {{ src(&#39;logs.extract_table&#39;) }}
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">settings.yaml</p>
<div class="highlight"><pre><span></span><code>profiles:
  dev:
    table_prefix: up
    schema_prefix: test
    from_prod:
      - &quot;logs.*&quot;
</code></pre></div>
</div>
<p>In the above example we have a task selecting data from <code>logs.extract_table</code> which for the purpose of this example we can assume is
created by an extraction task pulling data from an API. On production, <code>src('logs.extract_table')</code> will be translated as
<code>analytics_logs.extract_table</code>, whereas during development it will be translated as <code>test_logs.up_extract_table</code>, given the
configuration in the <code>dev</code> profile in <code>settings.yaml</code>. However there's also a <code>from_prod</code> entry with <code>logs.*</code> which is telling
SAYN that all tables or views from the <code>logs</code> schema should come from production, so the final code for the <code>test_table</code> task will
actually be:</p>
<div class="admonition example">
<p class="admonition-title">compile/core/test_table_select.sql</p>
<div class="highlight"><pre><span></span><code>SELECT *
  FROM analytics_logs.extract_table
</code></pre></div>
</div>
<p>As you can see, we just need to specify a list of tables in <code>from_prod</code> to always read from the production configuration, that is, the
settings shared by all team members as specified in <code>project.yaml</code>. To make it easier to use, wildcards (<code>*</code>) are accepted, so that we
can specify a whole schema like in the example, but we can also specify a list of tables explicitely instead.</p>
<p><code>from_prod</code> can also be specified using environment variables with <code>export SAYN_FROM_PROD="logs.*"</code> where the value is a comma
separated list of tables.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid accidentally affecting production tables, <code>from_prod</code> only affects <code>src</code>. The result of calling <code>out</code> always evaluate
to your configuration in <code>settings.yaml</code> or environment variables.</p>
</div>
<h3 id="upstream_prod">Upstream prod<a class="headerlink" href="#upstream_prod" title="Permanent link">&para;</a></h3>
<p>The second mechanism to override the behaviour of <code>src</code> is upstream prod. We use upstream prod by specifying the flag (<code>-u</code> or <code>--upstream-prod</code>)
when running SAYN while filtering, for example <code>sayn run -t example_task -u</code>. When we do this, any reference to tables produced by tasks not
present in the current execution will use the parameters defined in <code>project.yaml</code>.
For example:</p>
<div class="admonition example">
<p class="admonition-title">project.yaml</p>
<div class="highlight"><pre><span></span><code>schema_prefix: analytics
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">settings.yaml</p>
<div class="highlight"><pre><span></span><code>profiles:
  test:
    schema_prefix: test
    table_prefix: up
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">sql/example_model.sql</p>
<div class="highlight"><pre><span></span><code>SELECT *
  FROM {{ src(&#39;logs.raw_table&#39;) }}
</code></pre></div>
</div>
<p>Running <code>sayn run -t example_task</code> will run the following code in the database:</p>
<div class="admonition example">
<p class="admonition-title">compile/core/example_task_create_table.sql</p>
<div class="highlight"><pre><span></span><code>CREATE OR REPLACE TABLE test_models.up_example_model AS
SELECT *
  FROM test_logs.up_raw_table
</code></pre></div>
</div>
<p>So the <code>src</code> macro translates <code>logs.raw_table</code> to the testing name <code>test_logs.up_raw_table</code>. However, with upstream prod
(<code>sayn run -t example_task -u</code>) the code executed will be:</p>
<div class="admonition example">
<p class="admonition-title">compile/core/example_task_create_table.sql</p>
<div class="highlight"><pre><span></span><code>CREATE OR REPLACE TABLE test_models.up_example_model AS
SELECT *
  FROM analytics_logs.raw_table
</code></pre></div>
</div>
<p>Since no task in this execution creates <code>logs.raw_table</code> in SAYN translates that instead to the production name <code>analytics_logs.raw_table</code>,
while the table created is still the test version.</p>
<p>Let' assume now that we have another task that we want to include in the execution:</p>
<div class="admonition example">
<p class="admonition-title">sql/another_example_model.sql</p>
<div class="highlight"><pre><span></span><code>SELECT *
  FROM {{ src(&#39;models.example_model&#39;) }}
</code></pre></div>
</div>
<p>So when run <code>sayn run -t example_task another_example_task -u</code> the code for the <code>example_task</code> will remain the same as above,
but the code executed for <code>another_example_model</code> will be:</p>
<div class="admonition example">
<p class="admonition-title">compile/core/another_example_task_create_table.sql</p>
<div class="highlight"><pre><span></span><code>CREATE OR REPLACE TABLE test_models.up_another_example_model AS
SELECT *
  FROM test_models.up_example_model
</code></pre></div>
</div>
<p>Because <code>example_task</code> is part of this exeuction and produces the table <code>models.example_model</code> reference by <code>another_example_task</code>
<code>models.example_model</code> is translated using the testing settings into <code>test_models.up_example_model</code> unlike <code>logs.raw_table</code> which
as no task producing it is present in this execution, will be translated into the production name.</p>
<p>With upstream prod it becomes a lot easier to work with your modelling layer without having to duplicate all your upstream tables
for every person in the team or being forced to work with sampled data.</p>
<h2 id="advanced_usage">Advanced usage<a class="headerlink" href="#advanced_usage" title="Permanent link">&para;</a></h2>
<p>For a more advanced usage, we also have <code>schema_override</code> and <code>table_override</code> which allows us to completely change the behaviour.
With <code>override</code> what we do is define the exact value that a schema or table name will have based on some Jinja template logic. To
this template 3 values are passed:</p>
<ul>
<li><code>table</code>: the name of the table specified in sayn code</li>
<li><code>schema</code>: the name of the schema specified in sayn code</li>
<li><code>connection</code>: the name of the connection it refers to</li>
</ul>
<div class="admonition example">
<p class="admonition-title">settings.yaml</p>
<div class="highlight"><pre><span></span><code>profiles:
  test:
    schema_override: &quot;{% if schema != &#39;logs&#39; %}test{% else %}analytics{% endif %}_{{ schema }}&quot;
    table_override: &quot;{% if schema != &#39;logs&#39; %}up_{{ table }}{% else %}{{ table }}{% endif %}&quot;
</code></pre></div>
</div>
<p>With this example, a reference to <code>models.example_model</code> will be translated as <code>test_models.up_example_model</code> but a reference to
<code>logs.raw_logs</code> will be translated as <code>analytics_logs.raw_logs</code>. This can be useful in cases where someone in the team never
works with data ingestion, so every modelling task ran by them will always reads from production data, rather than having to
duplicate the data or having to work with a sample of this raw data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that with the above example of override, a task writting to the logs schema will always write to the production version
<code>analytics_logs</code> so to avoid issue you should always have good permissions setup in your database.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../parameters/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Parameters
              </div>
            </div>
          </a>
        
        
          <a href="../tasks/overview/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/173TECH" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>